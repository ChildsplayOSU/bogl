<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Runtime.Builtins</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Runtime.Builtins.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Spiel-Lang-0.1.0.6</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c)</td></tr><tr><th>License</th><td>BSD-3</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Runtime.Builtins</p></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:single">single</a> :: <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a></li><li class="src short"><a href="#v:builtinT">builtinT</a> :: <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; [(<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Language-Types.html#t:Type" title="Language.Types">Type</a>)]</li><li class="src short"><a href="#v:place">place</a> :: [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a></li><li class="src short"><a href="#v:builtinsChecker">builtinsChecker</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] -&gt; [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a></li><li class="src short"><a href="#v:builtins">builtins</a> :: [(<a href="Language-Syntax.html#t:Name" title="Language.Syntax">Name</a>, [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>)]</li><li class="src short"><a href="#v:builtinRefs">builtinRefs</a> :: [(<a href="Language-Syntax.html#t:Name" title="Language.Syntax">Name</a>, <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>)]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Count">Count</a> = (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:CountMap">CountMap</a> = <a href="../containers-0.6.0.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="Runtime-Builtins.html#t:Count" title="Runtime.Builtins">Count</a></li><li class="src short"><a href="#v:peek">peek</a> :: (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:Count" title="Runtime.Builtins">Count</a></li><li class="src short"><a href="#v:addCell">addCell</a> :: (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a></li><li class="src short"><a href="#v:checkCell">checkCell</a> :: <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; ((<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>), <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a></li><li class="src short"><a href="#v:checkCells">checkCells</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; [<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>]</li><li class="src short"><a href="#v:countCol">countCol</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:countRow">countRow</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:countDiag">countDiag</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:inARow">inARow</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:single" class="def">single</a> :: <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> <a href="src/Runtime.Builtins.html#single" class="link">Source</a> <a href="#v:single" class="selflink">#</a></p><div class="doc"><p>Produces a Tuple type wrapping a single Xtype</p></div></div><div class="top"><p class="src"><a id="v:builtinT" class="def">builtinT</a> :: <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; <a href="Language-Types.html#t:Xtype" title="Language.Types">Xtype</a> -&gt; [(<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Language-Types.html#t:Type" title="Language.Types">Type</a>)] <a href="src/Runtime.Builtins.html#builtinT" class="link">Source</a> <a href="#v:builtinT" class="selflink">#</a></p><div class="doc"><p>List of builtin function signatures</p></div></div><div class="top"><p class="src"><a id="v:place" class="def">place</a> :: [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> <a href="src/Runtime.Builtins.html#place" class="link">Source</a> <a href="#v:place" class="selflink">#</a></p><div class="doc"><p>places a piece on a board and also adds this new board to the display buffer.
   We only want the latest version of each unique board, so filter out its predecessor.</p></div></div><div class="top"><p class="src"><a id="v:builtinsChecker" class="def">builtinsChecker</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] -&gt; [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> <a href="src/Runtime.Builtins.html#builtinsChecker" class="link">Source</a> <a href="#v:builtinsChecker" class="selflink">#</a></p><div class="doc"><p>Verifies the parameters are of the expected number &amp; type from their respective lambdas
 A final case reports a Runtime error in case anything slips by,
 which indicates that the number and/or type of parameters didn't match what was expected
 for that builtin
 Note: This prevents a crash and gives somewhat better feedback to users,
 but this should not normally be reachable
 if the typechecker verifies the expressions correctly in advance</p></div></div><div class="top"><p class="src"><a id="v:builtins" class="def">builtins</a> :: [(<a href="Language-Syntax.html#t:Name" title="Language.Syntax">Name</a>, [<a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>] -&gt; <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>)] <a href="src/Runtime.Builtins.html#builtins" class="link">Source</a> <a href="#v:builtins" class="selflink">#</a></p><div class="doc"><p>List of builtin functions, with definitions for evaluation</p></div></div><div class="top"><p class="src"><a id="v:builtinRefs" class="def">builtinRefs</a> :: [(<a href="Language-Syntax.html#t:Name" title="Language.Syntax">Name</a>, <a href="Runtime-Monad.html#t:Eval" title="Runtime.Monad">Eval</a> <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>)] <a href="src/Runtime.Builtins.html#builtinRefs" class="link">Source</a> <a href="#v:builtinRefs" class="selflink">#</a></p><div class="doc"><p>Builtin references, just input for now</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Count" class="def">Count</a> = (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Runtime.Builtins.html#Count" class="link">Source</a> <a href="#t:Count" class="selflink">#</a></p><div class="doc"><p>the count of adjacent cells in four directions (above, diagonal <code> 10:30, left, diagonal </code> 7:30)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CountMap" class="def">CountMap</a> = <a href="../containers-0.6.0.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="Runtime-Builtins.html#t:Count" title="Runtime.Builtins">Count</a> <a href="src/Runtime.Builtins.html#CountMap" class="link">Source</a> <a href="#t:CountMap" class="selflink">#</a></p><div class="doc"><p>Map of the count</p></div></div><div class="top"><p class="src"><a id="v:peek" class="def">peek</a> :: (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:Count" title="Runtime.Builtins">Count</a> <a href="src/Runtime.Builtins.html#peek" class="link">Source</a> <a href="#v:peek" class="selflink">#</a></p><div class="doc"><p>A safe map lookup function which returns a default value for keys not in the map</p></div></div><div class="top"><p class="src"><a id="v:addCell" class="def">addCell</a> :: (<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> <a href="src/Runtime.Builtins.html#addCell" class="link">Source</a> <a href="#v:addCell" class="selflink">#</a></p><div class="doc"><p>Adds a cell into the count map</p></div></div><div class="top"><p class="src"><a id="v:checkCell" class="def">checkCell</a> :: <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; ((<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>), <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a>) -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> -&gt; <a href="Runtime-Builtins.html#t:CountMap" title="Runtime.Builtins">CountMap</a> <a href="src/Runtime.Builtins.html#checkCell" class="link">Source</a> <a href="#v:checkCell" class="selflink">#</a></p><div class="doc"><p>Checks a cell in the count map</p></div></div><div class="top"><p class="src"><a id="v:checkCells" class="def">checkCells</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; [<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a>] <a href="src/Runtime.Builtins.html#checkCells" class="link">Source</a> <a href="#v:checkCells" class="selflink">#</a></p><div class="doc"><p>Scans cells downwards by column (the order given by (assocs b) with (x,y) coords)
 each cell's count is the increment of the counts of the four cells before it</p></div></div><div class="top"><p class="src"><a id="v:countCol" class="def">countCol</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Runtime.Builtins.html#countCol" class="link">Source</a> <a href="#v:countCol" class="selflink">#</a></p><div class="doc"><p>Counts cols, rows, and diagonals in a board</p></div></div><div class="top"><p class="src"><a id="v:countRow" class="def">countRow</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Runtime.Builtins.html#countRow" class="link">Source</a> <a href="#v:countRow" class="selflink">#</a></p><div class="doc"><p>Counts cols, rows, and diagonals in a board</p></div></div><div class="top"><p class="src"><a id="v:countDiag" class="def">countDiag</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Runtime.Builtins.html#countDiag" class="link">Source</a> <a href="#v:countDiag" class="selflink">#</a></p><div class="doc"><p>Counts cols, rows, and diagonals in a board</p></div></div><div class="top"><p class="src"><a id="v:inARow" class="def">inARow</a> :: <a href="Runtime-Values.html#t:Board" title="Runtime.Values">Board</a> -&gt; <a href="Runtime-Values.html#t:Val" title="Runtime.Values">Val</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Runtime.Builtins.html#inARow" class="link">Source</a> <a href="#v:inARow" class="selflink">#</a></p><div class="doc"><p>checks whether a board has i cells containing v in a row</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>